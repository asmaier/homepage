---
author: deepmaier
blogger_id: tag:blogger.com,1999:blog-15525201.post-1498959972823161899
blogger_orig_url: https://asmaier.blogspot.com/2010/07/installation-von-modwsgi-unter-mac-os-x.html
date: "2010-07-11T22:28:00Z"
modified_time: "2010-08-18T14:43:38.797+02:00"
tags: null
title: Installation von mod_wsgi unter Mac OS X 10.6
---

<div style="text-align: left;">Ich wollte endlich mal <a href="http://de.wikipedia.org/wiki/Mod_wsgi">mod_wsgi</a> zur Entwicklung von Python Webapplikationen auf meinem Mac Mini ausprobieren. Die Installation von <a href="http://de.wikipedia.org/wiki/Mod_wsgi">mod_wsgi</a> mit Hilfe von <a href="http://www.macports.org/">MacPorts</a> erwies sich dabei als sehr einfach. Die anschliessende notwendige Konfiguration von <a href="http://de.wikipedia.org/wiki/Apache_HTTP_Server">Apache2</a> ist aber aufwendig genug, so dass ich sie hier mal im Detail beschreiben möchte:</div><div style="text-align: left;"><br /></div><div style="text-align: left;">0. Unter <span class="Apple-style-span"  style="font-family:'courier new';">Systemeinstellungen/Freigabe</span> die <span class="Apple-style-span"  style="font-family:'courier new';">Webfreigabe</span> deaktivieren um den von Apple in Mac OS X mitgelieferten Apache2 Server zu deaktivieren.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">1. Installation von mod_wsgi mit MacPorts:</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">> sudo port install mod_wsgi</span></div><div style="text-align: left;">Falls noch nicht vorhanden, wird Apache2 dabei mit installiert. </div><div style="text-align: left;"><br /></div><div style="text-align: left;">2. Starten und Testen von Apache:</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">> sudo /opt/local/apache2/bin/apachectl -k star</span>t</div><div style="text-align: left;">Nach dem Start von Apache kann man <a href="http://localhost/">http://localhost</a> mit dem Browser öffnen. Es sollte "It works!" angezeigt werden. </div><div style="text-align: left;"><br /></div><div style="text-align: left;">3. Apache beim Systemstart automatisch starten:</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">> sudo launchctl load -w /Library/LaunchDaemons/org.macports.apache2.plist</span></div><div style="text-align: left;"><br /></div><div style="text-align: left;">4. Aktivierung der Benutzerverzeichnisse, so dass Webseiten die unter <a href="http://localhost/">http://localhost/~username/Sites</a> liegen, angezeigt werden:</div><div style="text-align: left;">Dazu muss die Zeile  </div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">Include conf/extra/httpd-userdir.conf</span></div><div><div style="text-align: left;">in der Datei</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">/opt/local/apache2/conf/httpd.conf</span></div></div><div style="text-align: left;">einkommentiert werden. Dann in der Datei</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">/opt/local/apache2/conf/extra/httpd-userdir.conf</span></div><div style="text-align: left;">die Zeilen</div><div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">#</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"># Include user configurations</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">#</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">Include /private/etc/apache2/users/*.conf</span></div></div><div style="text-align: left;">hinzufügen. Danach muss Apache2 neugestartet werden: </div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">> sudo /opt/local/apache2/bin/apachectl -k restart</span></div><div style="text-align: left;">(Mehr dazu bei <a href="https://trac.macports.org/wiki/howto/MAMP">How to get a Apache, PHP, MySQL (MAMP) setup</a>.)</div><div style="text-align: left;"><br /></div><div style="text-align: left;">5.  Aktivierung des mod_wsgi Moduls für Apache2:</div><div style="text-align: left;">Dazu muss die Zeile</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">LoadModule wsgi_module modules/mod_wsgi.so</span></div><div style="text-align: left;">zu der Datei</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">/opt/local/apache2/conf/httpd.conf</span></div><div style="text-align: left;">hinzugefügt werden. Danach wieder Apache neustarten.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">6. Anlegen einer <span class="Apple-style-span"  style="font-family:'courier new';">wsgi</span>-Applikationen:</div><div style="text-align: left;">Zum Testen kann man erstmal folgende einfache <span class="Apple-style-span"  style="font-family:'courier new';">wsgi</span>-Applikation anlegen:</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">> pico hello.wsgi</span></div><div style="text-align: left;"><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">import sys</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">def application(environ, start_response):</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><span class="Apple-tab-span" style="white-space: pre;"> </span>status = '200 OK'</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><span class="Apple-tab-span" style="white-space: pre;"> </span>output = 'Hello World!\n'</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><span class="Apple-tab-span" style="white-space: pre;"> </span>output+= str(sys.path)</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><span class="Apple-tab-span" style="white-space: pre;"> </span>response_headers = [('Content-type', 'text/plain'),</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><span class="Apple-tab-span" style="white-space: pre;"> </span>('Content-Length', str(len(output)))]</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><span class="Apple-tab-span" style="white-space: pre;"> </span>start_response(status, response_headers)</span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><br /></span></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><span class="Apple-tab-span" style="white-space: pre;"> </span>return [output]</span></div><div style="text-align: left;"><br /></div><div style="text-align: left;">Sie gibt <span class="Apple-style-span"  style="font-family:'courier new';">"Hello World!" </span>zurück und zusätzlich die System-Pfade unter denen das wsgi-Modul nach Python-Modulen sucht (Siehe auch <a href="http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide">mod_wsgi - Quick Configuration Guide</a>).</div><div style="text-align: left;"><br /></div></div><div style="text-align: left;">7. Einrichten eines <a href="http://httpd.apache.org/docs/2.2/vhosts/">Virtual Hosts</a> für <span class="Apple-style-span"  style="font-family:'courier new';">wsgi</span>-Applikationen:</div><div style="text-align: left;"><div style="text-align: left;">Dazu muss die Zeile</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">Include conf/extra/httpd-vhosts.conf</span></div><div><div style="text-align: left;">in der Datei</div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';">/opt/local/apache2/conf/httpd.conf</span></div></div><div style="text-align: left;">einkommentiert werden. In der Datei </div><div style="text-align: left;"></div><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'times new roman';"><span class="Apple-style-span"  style="font-family:Georgia,serif;">die Zeilen  </span></span></div><div style="text-align: left;"><div style="text-align: left;"><span class="Apple-style-span"  style="font-family:'courier new';"><div style="text-align: left;">&lt;VirtualHost *:80&gt;</div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;"> </span>ServerName www.mydomain.org</div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;"> </span>ServerAlias mydomain.org</div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;"> </span>ServerAlias my.dyndns.org</div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;"> </span>ServerAdmin webmaster@mydomain.org</div><div style="text-align: left;"><br /></div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;"> </span>WSGIScriptAlias / /Users/username/Sites/webapp/hello.wsgi</div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;"> </span>WSGIScriptReloading On</div><div style="text-align: left;"><br /></div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;"> </span>&lt;Directory /Users/username/Sites/webapp&gt;</div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;">  </span>Order deny,allow</div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;">  </span>Allow from all</div><div style="text-align: left;"><span class="Apple-tab-span" style="white-space: pre;"> </span>&lt;/Directory&gt;</div><div style="text-align: left;">&lt;/VirtualHost&gt;</div></span></div></div><div style="text-align: left;">einfügen. Dabei steht <span class="Apple-style-span"  style="font-family:'courier new';">mydomain.org</span> für den gewünschten Domainnamen, <span class="Apple-style-span"  style="font-family:'courier new';">my.dyndns.org</span> für einen eventuell vorhandenen <a href="http://de.wikipedia.org/wiki/DynDNS">dynamischen DNS - Eintrag</a>. (Wie man Virtual Hosts noch besser mit DynDNS verwenden kann steht bei <a href="http://www.hackthenet.de/weblog/144/virtual-hosts-und-dyndns-zusammen-einsetzen">Virtual-Hosts und DynDNS zusammen einsetzen</a>. Das dort angesprochene Wildcard-Feature kostet jedoch 15 $ im Jahr). <span class="Apple-style-span"  style="font-family:'courier new';">WSGIScriptAlias</span> gibt an, dass die Root-Adresse <span class="Apple-style-span"  style="font-family:'courier new';">"/"</span> des virtuellen Servers die <span class="Apple-style-span"  style="font-family:'courier new';">wsgi</span>-Applikation <span class="Apple-style-span"  style="font-family:'courier new';">hello.wsgi</span></div></div><div style="text-align: justify;">im Verzeichnis <span class="Apple-style-span"  style="font-family:'courier new';">/Users/username/Sites/webapp</span> aufruft. Während der Entwicklung macht es auch Sinn <span class="Apple-style-span"  style="font-family:'courier new';">WSGIScriptReloading</span> zu aktivieren, damit man nicht bei jeder Änderung an der <span class="Apple-style-span"  style="font-family:'courier new';">wsgi</span>-Applikation den Apache-Server neustarten muss. Mehr dazu im <a href="http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide">mod_wsgi - Quick Configuration Guide</a>. Nach dem Konfigurieren des Virtualhosts muss der Apache-Server wieder neugestartet werden. Jedoch funktionieren die angegeben Domainnamen noch nicht. Dazu müssen erst noch in der Datei </div><div style="text-align: justify;"><span class="Apple-style-span"  style="font-family:'courier new';">/private/etc/hosts</span></div><div style="text-align: justify;">die Zeilen</div><div style="text-align: justify;"><div style="text-align: justify;"><span class="Apple-style-span"  style="font-family:'courier new';">127.0.0.1       mydomain.org</span></div><div style="text-align: justify;"><span class="Apple-style-span"  style="font-family:'courier new';">127.0.0.1       www.mydomain.org</span></div><div style="text-align: justify;">hinzugefügt werden (Siehe <a href="http://foundationphp.com/tutorials/vhosts_leopard.php">Creating a virtual host in Mac OS X 10.5</a> ).</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">8. Aufruf von <span class="Apple-style-span"  style="font-family:'courier new';">http://mydomain.org</span> bzw. <span class="Apple-style-span"  style="font-family:'courier new';">http://www.mydomain.org</span> mit dem Browser:</div><div style="text-align: justify;">Wenn alles geklappt hat sollte man jetzt <span class="Apple-style-span"  style="font-family:'courier new';">"Hello World!"</span> im Browser sehen und darunter die Python-Systempfade.</div></div>